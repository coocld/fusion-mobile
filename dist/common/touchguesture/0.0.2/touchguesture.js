"use strict";define("common/touchguesture/touchguesture",["common/pointerevents/pointerevents"],function(e){function t(e,t,s){var a;if("start"===t.type){if(2>s.length)return a={id:t.id,x:t.x,y:t.y},s.push(a),1===s.length?i(e,"dragstart",{x:s[0].x,y:s[0].y}):(a.l=Math.sqrt(Math.pow(t.x-s[0].x,2)+Math.pow(t.y-s[0].y,2)),i(e,"dragend",{x:s[0].x,y:s[0].y}),i(e,"zoomstart",{x:(s[0].x+s[1].x)/2,y:(s[0].y+s[1].y)/2})),!0}else"move"===t.type?n(e,t,s):o(e,t,s)}function n(e,t,n){var o=0;t.domEvent.preventDefault(),t.domEvent.stopPropagation(),1===n.length?t.id===n[0].id&&(n[0].x=t.x,n[0].y=t.y,i(e,"dragmove",{x:n[0].x,y:n[0].y})):(o=t.id===n[0].id?0:1,n[o].x=t.x,n[o].y=t.y,i(e,"zoomchange",{zoom:Math.sqrt(Math.pow(n[1].x-n[0].x,2)+Math.pow(n[1].y-n[0].y,2))/n[1].l}))}function o(e,t,n){var o;2===n.length?(o=t.id===n[0].id?0:1,n[o].x=t.x,n[o].y=t.y,i(e,"zoomend",{zoom:Math.sqrt(Math.pow(n[1].x-n[0].x,2)+Math.pow(n[1].y-n[0].y,2))/n[1].l}),n.splice(o,1),delete n[0].l,i(e,"dragstart",{x:n[0].x,y:n[0].y})):(n.pop(),i(e,"dragend",{x:t.x,y:t.y}))}function i(e,t,n){var o="on"+t;"function"==typeof e[o]&&(n||(n={}),n.type=t,e[o](n))}var s=function(n){var o,i;return this instanceof s?(o=this,i=[],this.destory=e(n,function(e){return t(o,e,i)}).destory,void 0):new s(n)};return s});