'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};define(['common/touchslider/touchslider','common/touchguesture/touchguesture','common/pointerevents/pointerevents','common/svgicos/svgicos','site/pages/pages','site/popups/popups'],function(a,b,c,d,e,f){function g(a,b,c){var d=b+'/'+c+'/',e=document.querySelector('#'+b+'>.content>.'+c);2===a.loaded&&'function'==typeof a.ondestory&&a.ondestory(),e.parentNode.removeChild(e),a.css&&'string'!=typeof a.css&&(a.css=s.removeCss(a.css).substr(require.toUrl(d).length)),a.js&&(d+=a.js,require.defined(d)&&(e=require(d),require.undef(d),e&&Reflect.setPrototypeOf(a,Object.prototype))),a.loaded=0}function h(a,b,c,d){function f(e){var f;k.querySelector(':scope>.content').insertAdjacentHTML('beforeEnd','<div class="'+b+'">'+e+'</div>'),l(k.querySelector(':scope>.content>.'+b)),'js'in a?(s.showLoading(),f=p+a.js,require.data.debug?require([f],h):require([f],h,function(d){g(a,o,b),d.requireType&&'scripterror'!==d.requireType&&'nodefine'!==d.requireType||d.xhr&&404!==d.xhr.status?i(f,d.message,c):j(c),s.hideLoading()})):(a.loaded=2,d(!0))}function h(b){b&&Reflect.setPrototypeOf(a,b),a.loaded=2,d(!0),s.hideLoading()}var k,o,p,n,m,q;c&&a.alias&&(b=a.alias,a=e[a.alias]),2===a.loaded?d():1!==a.loaded&&(a.loaded=1,c?(k=document.getElementById('page'),o='page'):(k=document.getElementById('popup'),o='popup'),p=o+'/'+b+'/',n=require.toUrl(p),'string'==typeof a.css&&(a.css=s.appendCss(n+a.css)),'html'in a?(s.showLoading(),m=n+a.html,q=new XMLHttpRequest,q.open('get',m,!0),q.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):(g(a,o,b),require.data.debug||404!==this.status?i(m,this.status,c):j(c)),s.hideLoading())},q.send('')):f(''))}function i(a,b,c){s.alert('\u52A0\u8F7D'+a+'\u65F6\u53D1\u751F\u4E86\u4E00\u4E2A\u9519\u8BEF: '+b,c?function(){history.back()}:void 0)}function j(a){a?location.reload():s.confirm('\u7F51\u7AD9\u5DF2\u7ECF\u66F4\u65B0, \u4F7F\u7528\u8BE5\u529F\u80FD\u9700\u8981\u5148\u91CD\u65B0\u52A0\u8F7D. \u662F\u5426\u7ACB\u5373\u5237\u65B0\u672C\u9875?',function(a){a&&location.reload()})}function k(a,b,c,d){function e(a){this.removeEventListener(a.type,e,!1),d()}a.style.visibility='visible',c?(b.classList.add('panelTransR1'),a.classList.add('panelTransR2')):(b.classList.add('panelTransL1'),a.classList.add('panelTransL2')),'function'==typeof d&&l(a,e)}function l(a,b){'function'!=typeof b&&(b=m),a.addEventListener(s.names.aniEvt,b,!1)}function m(a){a.target===this&&(this.style.right=this.className.match(/ panelTrans[LR]1/)?this.style.visibility='':0,this.className=this.className.replace(/ panelTrans[LR][12]/,''))}function n(a,b){for(;e[a].back;)if(a=e[a].back,a===b)return!0}function o(a){a.preventDefault()}function p(a){a.stopPropagation()}var q,s={appendCss:function appendCss(a){var b=document.createElement('link');return /\.less$/.test(a)?'object'===('undefined'==typeof less?'undefined':_typeof(less))?(b.rel='stylesheet/less',b.href=a,less.sheets.push(b),less.refresh()):(b.rel='stylesheet',b.href=a.replace(/less$/,'css')):(b.rel='stylesheet',b.href=a),document.head.appendChild(b)},removeCss:function removeCss(a){return document.head.removeChild(a),'stylesheet/less'===a.rel&&(less.sheets.splice(less.sheets.indexOf(a),1),less.refresh()),a.getAttribute('href')},makeSvg:function makeSvg(a,b){var c='http://www.w3.org/2000/svg',d=document.createElementNS(c,'svg');return d.appendChild(document.createElementNS(c,'path')).setAttribute('transform','scale(1,-1)'),a&&s.setSvgPath(d,a,b),d},setSvgPath:function setSvgPath(a,b,c){var e,f=s.makeSvg();f.style.position='absolute',f.style.bottom=f.style.right='100%',f.firstChild.setAttribute('d',d[b]),document.body.appendChild(f),e=f.firstChild.getBBox(),document.body.removeChild(f),c&&(e.width>e.height?(e.y-=(e.width-e.height)/2,e.height=e.width):(e.x-=(e.height-e.width)/2,e.width=e.height)),a.firstChild.setAttribute('d',d[b]),a.setAttribute('viewBox',e.x+' '+(-e.y-e.height)+' '+e.width+' '+e.height)},buildHash:function buildHash(a){var b,c='#!'+encodeURIComponent(a.id);for(b in a.args)c+=void 0===a.args[b]?'&'+encodeURIComponent(b):'&'+encodeURIComponent(b)+'='+encodeURIComponent(a.args[b]);return c},parseHash:function parseHash(b){var c,d,a,f={id:q,args:{}};if(b=b.substr(1).replace(/[#\?].*$/,''),a=b.match(/[^=&]+(=[^&]*)?/g),a)for('!'===a[0].charAt(0)&&(d=a[0].substr(1),(d in e)&&(f.id=decodeURIComponent(d))),c=1;c<a.length;c++)d=a[c].match(/^([^=]+)(=)?(.+)?$/),d&&(f.args[decodeURIComponent(d[1])]=d[2]?decodeURIComponent(d[3]||''):void 0);return f},getDefaultBack:function getDefaultBack(a){var b,c,d;if(a||(a=s.location),e[a.id])if('object'===s.dataType(e[a.id].backLoc))d=e[a.id].backLoc;else if(e[a.id].back&&e[e[a.id].back]&&(d={id:e[a.id].back,args:{}},c=e[e[a.id].back].alias?e[e[e[a.id].back].alias]:e[e[a.id].back],c.args))for(b=0;b<c.args.length;b++)c.args[b]in a.args&&(d.args[c.args[b]]=a.args[c.args[b]]);return d},isSameLocation:function isSameLocation(a,b){if(a.id===b.id&&Object.keys(a.args).length===Object.keys(b.args).length){for(var c in a.args){if(!(c in b.args))return!1;if(void 0===a.args[c]){if(a.args[c]!==b.args[c])return!1;}else if(''+a.args[c]!=''+b.args[c])return!1}return!0}return!1},replaceLocation:function replaceLocation(a){s.location&&s.isSameLocation(a,s.location)?s.reloadPage():location.replace(s.buildHash(a))},isGoingback:function isGoingback(a,b){return!!n(a,b)||!n(b,a)&&(e[a].alias?!!n(e[a].alias,b)||!n(b,e[a].alias)&&b===q:e[b].alias?!!n(a,e[b].alias)||!n(e[b].alias,a)&&e[a]===q:b===q)},dataType:function dataType(b){var c='undefined'==typeof b?'undefined':_typeof(b);return'string'===c||'number'===c||'function'===c||'undefined'===c?c:(c=Object.prototype.toString.call(b).replace(/^\[object |\]$/g,'').toLowerCase(),'date'===c||'array'===c||'regexp'===c||'error'===c||'null'===c?c:'object')}};return!function(){function a(a,b){var c,d;for(a.xEvents[b.type].locked=!0,c=0;c<a.xEvents[b.type].length;c++)a.xEvents[b.type][c].call(a,b);for(a.xEvents[b.type].locked=!1;a.xEvents[b.type].stack.length;)a.xEvents[b.type].stack[0]?(d=a.xEvents[b.type].indexOf(a.xEvents[b.type].stack[0][1]),a.xEvents[b.type].stack[0][0]?0<=d&&a.xEvents[b.type].splice(d,1):0>d&&a.xEvents[b.type].push(a.xEvents[b.type].stack[0][1])):a.xEvents[b.type].splice(0,a.xEvents[b.type].length),a.xEvents[b.type].stack.shift();if(a.xEvents[b.type].length||(delete a.xEvents[b.type],a['on'+b.type]=null),a.xEvents.removeMark){for(c in delete a.xEvents.removeMark,a.xEvents)delete a.xEvents[c],a['on'+c]=null;delete a.xEvents}}s.listeners={add:function add(b,c,d){b.xEvents||(b.xEvents=function(c){a(b,c)}),b.xEvents[c]||(b.xEvents[c]=[],b.xEvents[c].stack=[],b.xEvents[c].locked=!1,b['on'+c]=b.xEvents),b.xEvents[c].locked?b.xEvents[c].stack.push([!1,d]):0>b.xEvents[c].indexOf(d)&&b.xEvents[c].push(d)},list:function list(a,b){var c,d;if(b)c=a.xEvents&&a.xEvents[b]?a.xEvents[b].slice(0):[];else if(c={},a.xEvents)for(d in a.xEvents)'array'===s.dataType(a.xEvents[d])&&a.xEvents[d].length&&(c[d]=a.xEvents[d].slice(0));return c},remove:function remove(a,b,c){var d,e,f;if(a.xEvents)if(b)a.xEvents[b]&&(a.xEvents[b].locked?c?a.xEvents[b].stack.push([!0,c]):a.xEvents[b].stack.push(null):c?(f=a.xEvents[b].indexOf(c),0<=f&&a.xEvents[b].splice(f,1)):a.xEvents[b].splice(0,a.xEvents[b].length),0===a.xEvents[b].length&&(delete a.xEvents[b],a['on'+b]=null));else if(!a.xEvents.removeMark){for(d in a.xEvents)a.xEvents[d].locked?e=!0:(delete a.xEvents[d],a['on'+d]=null);e?a.xEvents.removeMark=!0:delete a.xEvents}}}}(),!function(){s.names={},'animation'in document.documentElement.style?(s.names.aniEvt='animationend',s.names.aniStyle='animation'):(s.names.aniEvt='webkitAnimationEnd',s.names.aniStyle='webkitAnimation'),'transition'in document.documentElement.style?(s.names.transEvt='transitionend',s.names.transStyle='transition'):(s.names.transEvt='webkitTransitionEnd',s.names.transStyle='webkitTransition'),s.names.transform='transform'in document.documentElement.style?'transform':'webkitTransform'}(),!function(){function a(){0===this.scrollTop?this.scrollTop=1:this.scrollTop+this.clientHeight===this.scrollHeight&&(this.scrollTop-=1)}function b(a){a.target===this&&(this.scrollTo?this.scrollTo(0,0):this.scrollLeft=this.scrollTop=0)}s.scrollReload=function(a,b){s.fixIosScrolling(a);var d,e,f,g,i=c(a,function(c){function j(b){b.target!==a&&(g=!0,k())}function k(){window.removeEventListener('scroll',j,!0)}if('start'!==c.type){if(g)return g=!1,!0;var l;if(c.y>d+5)e||(e=!0,k()),c.domEvent.preventDefault(),f||(f=document.createElement('div'),f.className='reloadHint',f.appendChild(s.makeSvg('refresh')),a.appendChild(f)),l=f.offsetHeight||f.clientHeight,c.y-d<2*l?(f.style.top=c.y-d-l+'px',f.classList.remove('pin'),f.style.opacity=(c.y-d)/l/2,f.style[s.names.transform]='rotate('+360*f.style.opacity+'deg)'):(f.style.top=l+'px',f.style.opacity=1,f.classList.add('pin'),f.style[s.names.transform]='');else{if(c.y<d&&!e)return!0;f&&(a.removeChild(f),f=void 0)}('end'===c.type||'cancel'===c.type)&&(f&&(a.removeChild(f),f.classList.contains('pin')&&('function'==typeof b?b():s.reloadPage()),f=void 0),e=!1)}else if(0===i.pointers.length&&(a.classList.contains('iosScrollFix')&&1===a.scrollTop||!a.classList.contains('iosScrollFix')&&0===a.scrollTop))return d=c.y,window.addEventListener('scroll',j,!0),!0})},s.fixIosScrolling=function(b){var d,e;'IOS'===browser.name&&(b.style.webkitOverflowScrolling='touch',b.addEventListener('touchmove',p),e=getComputedStyle(b),'auto'===e.overflowY&&(b.classList.add('iosScrollFix'),'none'===e.display?(d=b.style.display,b.style.display='block',b.scrollTop=1,b.style.display=d):b.scrollTop=1,b.addEventListener('scroll',a)))},s.getScrollHeight=function(a){return a.classList.contains('iosScrollFix')?a.scrollHeight-1:a.scrollHeight},'IOS'===browser.name&&window.addEventListener('touchmove',function(a){a.preventDefault()}),window.addEventListener('scroll',b,!1),document.documentElement.addEventListener('scroll',b,!1),document.body.addEventListener('scroll',b,!1),document.getElementById('page').addEventListener('scroll',b,!1),document.getElementById('popup').addEventListener('scroll',b,!1)}(),!function(){function a(){1<c.length?(c.shift(),'function'==typeof c[0]?(c[0](),a()):b(c[0])):d.style.display=''}function b(a){var b,c,d;for(f.src=a.img,('right'in a)&&(f.style.right=a.right),('left'in a)&&(f.style.left=a.left),('top'in a)&&(f.style.top=a.top),('bottom'in a)&&(f.style.bottom=a.bottom),('width'in a)&&(f.style.width=a.width),('height'in a)&&(f.style.height=a.height),d=0;d<e.childNodes.length;d++)b=e.childNodes[d],a.rows[d]?(b.style.height=a.rows[d],b.className='unflexable'):(b.style.height='auto',b.className='flexable');for(b=e.childNodes[1],d=0;d<b.childNodes.length;d++)c=b.childNodes[d],a.cells[d]?(c.style.width=a.cells[d],c.className='unflexable'):(c.style.width='auto',c.className='flexable')}var c,d=document.getElementById('helper'),e=d.firstChild,f=d.lastChild;d.addEventListener('click',a),s.showHelper=function(a){c='array'===s.dataType(a)?a:[a],b(c[0]),d.style.display='block'}}(),!function(){function a(a,b){return d&&'function'==typeof f[d].onunload&&f[d].onunload()||'function'==typeof f[a].onload&&f[a].onload(b)}function b(a){d&&(l.classList.remove(d),delete f[d].backParam),e=void 0,d=a,l.classList.add(d),n.data=f[a].title,f[a].back?(o.lastChild.data=f[f[a].back].title,o.style.visibility='visible'):o.style.visibility='hidden'}function c(c,g){var h=d;return!!a(c,g)||void(k(l.querySelector(':scope>.content>.'+c),l.querySelector(':scope>.content>.'+d),c===f[d].back||c===e,function(){var a;i=!1,b(c),'function'==typeof f[h].onunloadend&&f[h].onunloadend(),'function'==typeof f[d].onloadend&&f[d].onloadend(),'function'==typeof j&&(a=j,j=void 0,a())}),i=c)}var d,e,i,j,l=document.getElementById('popup'),m=l.querySelector(':scope>.header>.close'),n=l.querySelector(':scope>.header>.title').firstChild,o=l.querySelector(':scope>.header>.back');s.openPopup=function(a,b){if(window.frameElement&&window.frameElement.kernel&&'function'==typeof window.frameElement.kernel.openPopup)window.frameElement.kernel.openPopup(a,b);else{var c=f[a];c?h(c,a,!1,function(){'function'==typeof c.open?c.open(b):s.showPopup(a,b)}):s.hint('popup config not found: '+a)}},s.showPopup=function(e,g){if(i)j=function(){s.showPopup(e,g)};else{var h;if(!l.classList.contains('in')){if(a(e,g))return!0;h=l.querySelector(':scope>.content>.'+e),h.style.right=0,h.style.visibility='visible',l.classList.add('in'),i=e,'function'==typeof s.popupEvents.onshow&&s.popupEvents.onshow({type:'show',id:e}),b(e),s.hideReadable()}else{if(d!==e)return c(e,g);'function'==typeof f[e].onload&&f[e].onload(g)||'function'!=typeof f[e].onloadend||f[e].onloadend()}}},s.closePopup=function(a){var b;i?j=function(){s.closePopup(a)}:(b=s.getCurrentPopup(),b&&(!a||b===a||'array'===s.dataType(a)&&0<=a.indexOf(b))&&('function'!=typeof f[b].onunload||!f[b].onunload())&&(l.classList.remove('in'),l.classList.add('out'),i=!0,delete f[b].backParam,'function'==typeof s.popupEvents.onhide&&s.popupEvents.onhide({type:'hide',id:b})))},s.getCurrentPopup=function(){if(l.classList.contains('in'))return d},s.setPopupBackParam=function(a){l.classList.contains('in')&&(f[d].backParam=a)},s.setPopupBack=function(a,b){b?b in f&&(a?(f[b].back=a,d===b&&(o.lastChild.data=f[a].title)):(delete f[b].back,o.style.visibility='hidden')):l.classList.contains('in')&&(a?(o.lastChild.data=f[a].title,e=a,o.style.visibility=''):o.style.visibility='hidden')},s.setPopupTitle=function(a,b){b?b in f&&(f[b].title=a,d===b&&(n.data=a)):l.classList.contains('in')&&(n.data=a)},s.destoryPopup=function(a){var b=f[a];b&&g(b,'popup',a)},s.popupEvents={},m.appendChild(s.makeSvg('close')),m.addEventListener('click',function(){s.closePopup()},!1),o.insertBefore(s.makeSvg('chevron-left'),o.firstChild),o.addEventListener('click',function(){s.openPopup(e?e:f[d].back,f[d].backParam)},!1),l.addEventListener(s.names.aniEvt,function(a){var b;if(a.target===this&&(i=!1,this.classList.contains('out')?(this.classList.remove('out'),'function'==typeof s.popupEvents.onhideend&&s.popupEvents.onhideend({type:'hideend',id:d}),b=l.querySelector(':scope>.content>.'+d),b.style.right=b.style.visibility='','function'==typeof f[d].onunloadend&&f[d].onunloadend(),l.classList.remove(d),d=void 0):('function'==typeof f[d].onloadend&&f[d].onloadend(),'function'==typeof s.popupEvents.onshowend&&s.popupEvents.onshowend({type:'showend',id:d})),'function'==typeof j)){var c=j;j=void 0,c()}},!1)}(),!function(){var a,b=document.getElementById('readable'),c=b.querySelector(':scope>.close'),d=b.querySelector(':scope>.content');s.fixIosScrolling(d),s.showReadable=function(c,e,f){'string'==typeof c?d.innerHTML=c:d.appendChild(c),b.className=f?'in '+f:'in',a=e},s.hideReadable=function(){s.isReadableShowing()&&(b.classList.remove('in'),b.classList.add('out'),'function'==typeof a&&a())},s.isReadableShowing=function(){return b.classList.contains('in')},s.showForeign=function(a,b){s.showReadable('<iframe frameborder="no" scrolling="auto" sandbox="allow-same-origin allow-forms allow-scripts" src="'+a+'"></iframe>',b,'foreign')},s.clearPopup=function(){s.hideReadable(),s.closePopup()},c.appendChild(s.makeSvg('close')),c.addEventListener('click',s.hideReadable,!1),b.addEventListener(s.names.aniEvt,function(a){if(a.target===this&&this.classList.contains('out')){for(;0<d.childNodes.length;)d.removeChild(d.firstChild);this.className=''}},!1)}(),!function(){function c(){''===t.style.visibility&&''===q.style.visibility&&''===x.style.visibility&&''===A.style.visibility&&document.body.classList.remove('mask')}function d(a,b,c){'visible'===t.style.visibility?o.push([a,b,c]):(u.className=a,'alert'===a||'confirm'===a?v.textContent=b:'string'==typeof b?v.innerHTML=b:v.appendChild(b),window.addEventListener('resize',e,!1),e(),document.body.classList.add('mask'),t.style.visibility='visible',k=c)}function e(){u.style.width=u.style.height='',u.style.bottom=u.style.right='auto',u.style.width=u.offsetWidth+'px',u.style.height=u.offsetHeight+'px',u.style.bottom=u.style.right=''}function f(){C.style.width=p.w+'px',C.style.height=p.h+'px',C.style.left=p.l+'px',C.style.top=p.t+'px'}function g(){p.ww=window.innerWidth,p.wh=window.innerHeight,p.wr=p.ww/p.wh,p.ow=C.naturalWidth,p.oh=C.naturalHeight,p.r=p.ow/p.oh,p.ow>p.ww||p.oh>p.wh?p.r>p.wr?(p.z=p.mz=p.ww/p.ow,p.l=0,p.w=p.ww,p.h=p.w/p.r,p.t=(p.wh-p.h)/2):(p.z=p.mz=p.wh/p.oh,p.t=0,p.h=p.wh,p.w=p.h*p.r,p.l=(p.ww-p.w)/2):(p.z=p.mz=1,p.w=p.ow,p.h=p.oh,p.l=(p.ww-p.w)/2,p.t=(p.wh-p.h)/2),f()}function h(a){function b(a){var b=l(m(a.zoom*e,1),p.mz);b!==p.z&&(p.w=p.ow*b,p.h=p.oh*b,p.l=p.w>p.ww?m(l(c+(p.l-c)*b/p.z,p.ww-p.w),0):(p.ww-p.w)/2,p.t=p.h>p.wh?m(l(d+(p.t-d)*b/p.z,p.wh-p.h),0):(p.wh-p.h)/2,p.z=b,f())}var c=a.x,d=a.y,e=p.z;this.onzoomstart=null,this.onzoomchange=b,this.onzoomend=function(a){b.call(this,a),this.onzoomchange=this.zoomend=null,this.onzoomstart=h}}function i(a){function b(a){p.w>p.ww&&(p.l=m(l(e+a.x-c,p.ww-p.w),0)),p.h>p.wh&&(p.t=m(l(g+a.y-d,p.wh-p.h),0)),f()}var c=a.x,d=a.y,e=p.l,g=p.t;E.ondragmove=b,E.ondragend=function(a){b.call(this,a),this.ondragmove=this.ondragend=null,this.ondragstart=i}}var j,k,l=Math.max,m=Math.min,n=0,o=[],p={},q=document.getElementById('loading'),r=document.getElementById('hint'),t=document.getElementById('dialog'),u=t.querySelector('div'),v=u.querySelector(':scope>.content'),w=u.querySelector(':scope>.close'),x=document.getElementById('sliderView'),y=x.querySelector(':scope>.close'),z=a(x.querySelector(':scope>.content')),A=document.getElementById('photoView'),B=A.querySelector(':scope>.close'),C=A.querySelector(':scope>img'),D=A.querySelector(':scope>.actions'),E=b(A);E.onzoomstart=h,E.ondragstart=i,s.showPhotoView=function(a,b,c){var d,e;for(C.src=a;D.childNodes.length;)D.removeChild(D.firstChild);if('function'==typeof c&&b&&b.length){for(d=0;d<b.length;d++)e=document.createElement('a'),e.href='javascript:;',e.appendChild(document.createTextNode(b[d])),e.addEventListener('click',c.bind(s,d)),D.appendChild(e);D.style.display=''}else D.style.display='none'},s.hidePhotoView=function(){C.src='about:blank'},C.addEventListener('load',function(){A.style.visibility='visible',document.body.classList.add('mask'),window.addEventListener('resize',g),g()}),C.addEventListener('error',function(){A.style.visibility='',window.removeEventListener('resize',g),c()}),s.showSliderView=function(a,b,c){var d;for(x.className=c||'',d=0;d<a.length;d++)z.add(a[d]);b&&z.slideTo(b,!0)},s.hideSliderView=function(){z.clear()},s.alert=function(a,b){d('alert',a,b)},s.confirm=function(a,b){d('confirm',a,b)},s.htmlDialog=function(a,b,c){d(b||'',a,c)},s.closeDialog=function(b){var d;for(window.removeEventListener('resize',e,!1),t.style.visibility='',c(),'function'==typeof k&&k(b);v.childNodes.length;)v.removeChild(v.lastChild);k=void 0,o.length&&(d=o.shift(),s[d.shift()].apply(s,d))},s.showLoading=function(a){q.querySelector('div').lastChild.data=a?a:'\u52A0\u8F7D\u4E2D...',0==n&&(q.style.visibility='visible',document.body.classList.add('mask')),n++},s.hideLoading=function(){0<n&&(n--,0==n&&(q.style.visibility='',c(),'function'==typeof s.dialogEvents.onloaded&&s.dialogEvents.onloaded({type:'loaded'})))},s.isLoading=function(){return 0<n},s.hint=function(a,b){r.querySelector(':scope>.text').firstChild.data=a,j?clearTimeout(j):r.style.opacity=1,j=setTimeout(function(){r.style.opacity='',j=void 0},b?b:5e3)},s.dialogEvents={},z.onchange=function(){var a,b='';if(this.children.length){if(1<this.children.length)for(a=0;a<this.children.length;a++)b+=a===this.current?'\u25CF':'\u25CB';x.style.visibility='visible',document.body.classList.add('mask')}else x.style.visibility='',c();x.querySelector(':scope>.nav').firstChild.data=b},w.appendChild(s.makeSvg('close')),w.addEventListener('click',s.closeDialog,!1),u.querySelector(':scope>.btns>.yes').addEventListener('click',s.closeDialog,!1),u.querySelector(':scope>.btns>.no').addEventListener('click',function(){s.closeDialog()},!1),y.appendChild(w.firstChild.cloneNode(!0)),B.appendChild(w.firstChild.cloneNode(!0)),y.addEventListener('click',s.hideSliderView,!1),B.addEventListener('click',s.hidePhotoView,!1)}(),!function(){function a(){var b,f,g=s.location.id,i=e[g];s.lastLocation&&(b=g.replace(/-.*$/,''),f=s.lastLocation.id.replace(/-.*$/,''),b!==f&&(b in u&&(u[b].className='selected','object'===_typeof(t[b])&&s.setSvgPath(u[b].firstChild,t[b].selected,!0)),f in u&&(u[f].className='','object'===_typeof(t[f])&&s.setSvgPath(u[f].firstChild,t[f].normal,!0))),s.clearPopup()),'function'==typeof r&&r(),h(i,g,!0,function(b){if(l)m=!0;else{var f,h,i,o,p=e[g].alias?e[g].alias:g;if(g!==j){for(v.classList.add(g),v.querySelector(':scope>.header>.title').firstChild.data=e[g].title,window.frameElement&&window.frameElement.kernel&&'function'==typeof window.frameElement.kernel.getCurrentPopup&&'page'===window.frameElement.kernel.getCurrentPopup()&&window.frameElement.kernel.setPopupTitle(e[g].title);x.childNodes.length;)x.removeChild(x.firstChild);for(;w.childNodes.length;)w.removeChild(w.firstChild);e[g].onrightmenuclick?(x.href='function'==typeof e[g].onrightmenuclick?'javascript:;':e[g].onrightmenuclick,e[g].rightMenuDomContent&&x.appendChild(e[g].rightMenuDomContent),x.style.display=''):x.style.display='none',e[g].onleftmenuclick?(w.href='function'==typeof e[g].onleftmenuclick?'javascript:;':e[g].onleftmenuclick,e[g].leftMenuDomContent&&w.appendChild(e[g].leftMenuDomContent),w.style.display='',n.style.display='none'):w.style.display='none',d(s.getDefaultBack()),f=v.querySelector(':scope>.content>.'+p),j?(v.classList.remove(j),h=j,i=e[h].alias?e[h].alias:h,j=g,p===i?c(!0):(o=s.isGoingback(h,g),l=!0,k(f,v.querySelector(':scope>.content>.'+i),o,function(){l=!1,'function'==typeof e[i].onunloadend&&e[i].onunloadend(!o),'function'==typeof e[p].onloadend&&e[g].onloadend(!o),m&&(m=!1,f.style.visibility='visible',a())}),'function'==typeof e[i].onunload&&e[i].onunload(),'function'==typeof e[p].onload&&e[p].onload(!o||b))):(j=g,f.style.right=0,f.style.visibility='visible',c(!0))}else c()}})}function b(a,b){var c=e[j].alias?e[e[j].alias]:e[j];(!a||'string'==typeof a&&a===s.location.id||0<=a.indexOf(s.location.id))&&(!b&&s.clearPopup(),'function'==typeof c.onunload&&c.onunload(!0),'function'==typeof c.onunloadend&&c.onunloadend(!0),'function'==typeof c.onload&&c.onload(!0),'function'==typeof c.onloadend&&c.onloadend(!0))}function c(a){var b=e[j].alias?e[e[j].alias]:e[j];'function'==typeof b.onload&&b.onload(a),'function'==typeof b.onloadend&&b.onloadend()}function d(a){if(a&&a.id){var b=e[a.id].title;b||(b='\u8FD4\u56DE'),n.lastChild.data=b,n.href=s.buildHash(a),n.style.display=''}else n.href='#!',n.style.display='none'}function f(){var b=s.parseHash(location.hash);s.isSameLocation(b,s.location)||(s.lastLocation=s.location,s.location=b,e[s.location.id].back&&(s.lastLocation.id===e[s.location.id].back||e[s.lastLocation.id].alias===e[s.location.id].back)?(i[s.location.id]=e[s.location.id].backLoc=s.lastLocation,sessionStorage.setItem('kernelHistory',JSON.stringify(i))):e[s.lastLocation.id].backLoc&&(s.location.id===e[s.lastLocation.id].back||e[s.location.id].alias&&e[s.location.id].alias===e[s.lastLocation.id].back)&&(delete e[s.lastLocation.id].backLoc,delete i[s.lastLocation.id],sessionStorage.setItem('kernelHistory',JSON.stringify(i))),a())}var i,j,l,m,r,t,u,v=document.getElementById('page'),n=v.querySelector(':scope>.header>.back'),w=v.querySelector(':scope>.header>.leftMenuBtn'),x=v.querySelector(':scope>.header>.rightMenuBtn');try{sessionStorage.setItem(0,0),sessionStorage.removeItem(0)}catch(a){Storage.prototype.setItem=function(){}}s.init=function(b,c,d){var g,h=v.querySelector(':scope>.navMenu');if(!s.location){for(g in q=b,t=c,r=d,s.location=s.parseHash(location.hash),'clean'===s.location.args.ui&&document.body.classList.add('clean'),i=sessionStorage.getItem('kernelHistory'),i=i?JSON.parse(i):{},i)g in e&&(e[g].backLoc=i[g]);for(window.addEventListener('hashchange',f,!1),u={};h.childNodes.length;)h.removeChild(h.childNodes[0]);for(g in t)g in e&&(u[g]=h.appendChild(document.createElement('a')),u[g].href='#!'+g,RegExp('^'+g+'(?:-|$)').test(s.location.id)?(u[g].className='selected',u[g].appendChild(s.makeSvg('object'===_typeof(t[g])?t[g].selected:t[g],!0))):u[g].appendChild(s.makeSvg('object'===_typeof(t[g])?t[g].normal:t[g],!0)),u[g].appendChild(document.createTextNode(e[g].title)));window.addEventListener('contextmenu','Firefox'===browser.name?p:o,!1),window.addEventListener('dragstart',o,!1),document.body.classList.remove('loading'),a(),'autopopup'in s.location.args&&s.openPopup(s.location.args.autopopup,s.location.args.autopopuparg?JSON.parse(s.location.args.autopopuparg):void 0)}},s.reloadPage=function(a,c){function d(f){s.listeners.remove(this,f.type,d),s.isSameLocation(e,s.location)&&b(a,c)}var e;s.isLoading()?(e=s.location,s.listeners.add(s.dialogEvents,'loaded',d)):b(a,c)},s.destoryPage=function(a){var b=e[a];b&&g(b,'page',a)},n.insertBefore(s.makeSvg('chevron-left'),n.firstChild),x.addEventListener('click',function(){'function'==typeof e[j].onrightmenuclick&&e[j].onrightmenuclick()},!1),w.addEventListener('click',function(){'function'==typeof e[j].onleftmenuclick&&e[j].onleftmenuclick()},!1)}(),s});